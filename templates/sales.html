{% extends "base.html" %}
{% block content %}
<h1>Sales</h1>

<form method="post" class="form">
  <label>Product
    <select name="product_id" required>
      {% for p in products %}
        <option value="{{ p.id }}">{{ p.name }}</option>
      {% endfor %}
    </select>
  </label>
  <label>Sale Date <input type="date" name="sale_date"></label>
  <label>Quantity (L) <input type="number" step="0.01" name="quantity_liters" required></label>
  <label>Price/Liter (₹) <input type="number" step="0.01" name="price_per_liter" required></label>
  <label>Customer <input name="customer" placeholder="(optional)"></label>
  <button type="submit">Add Sale</button>
</form>

<table>
  <thead><tr><th>ID</th><th>Product</th><th>Type</th><th>Date</th><th>Qty (L)</th><th>Price/L</th><th>Customer</th></tr></thead>
  <tbody>
  {% for r in rows %}
    <tr>
      <td>{{ r.id }}</td><td>{{ r.product }}</td><td>{{ r.oil_type }}</td>
      <td>{{ r.sale_date }}</td><td>{{ '%.2f'|format(r.quantity_liters) }}</td><td>₹ {{ '%.2f'|format(r.price_per_liter) }}</td>
      <td>{{ r.customer or '-' }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
